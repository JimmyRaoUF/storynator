<!DOCTYPE html>
<html><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
	<meta charset="utf-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<title></title>
	<link rel="stylesheet" href="">
	<style type="text/css" media="screen">
		@import url(https://fonts.googleapis.com/css?family=Anonymous+Pro:400,700);

		@keyframes error {
			00% {transform: translateX(0);}
			33% {transform: translateX(1em);}
			66% {transform: translateX(-1em);}
			100% {transform: translateX(0);}
		}
		@keyframes drop {
			00% {transform: scale(1);}
			25% {transform: scale(0.9);}
			50% {transform: scale(1.02);}
			75% {transform: scale(0.95);}
			100% {transform: scale(1);}
		}
		@keyframes reveal {
			from {opacity: 0;}
			to {opacity: 1;}
		}

		body {
			padding: 0;
			margin: 0;
			box-sizing: border-box;
			font: 400 11px/1.25 "Anonymous Pro";
		}
		.story {
			counter-reset: part shot -1 shot-total case case-total;
			padding: 1em 1%;
		}

		/* header */

		.header {
			position: fixed;
			background: #fff;
			top: 0;
			right: 0;
			left: 0;
			z-index: 999;
			box-shadow: 0 0 1px;
			padding: .5em;
			overflow: auto;
		}
		.header.static {
			position: static;
			box-shadow: none;
		}
		.header * {
			margin: 0;
			padding: 0;
			display: inline-block;
		}
		.header h1 {
			padding: .25em .5em;
		}
		.header ul {
			float: right;
			margin: 1.1em 0;
		}
		.header .btn {
			padding: 0 1em;
		}
		.toggle::before {
			font-weight: 300;
			padding-right: .5em;
		}
		.toggle.off::before {
			content: "☐";
		}

		/* PARTS */

		.story .parts,
		.story .parts ul {
			margin: 0;
			padding: 0;
			list-style: none;
		}
		.story .parts {
			padding: 3em 0;
		}
		.part,
		.add-part {
			position: relative;
			clear: both;
			counter-reset: shot;
			counter-increment: part;
		}
		.part-header,
		.part-placeholder,
		.add-part  {
			position: relative;
			min-height: 2.75em;
			border-radius: 3px;
			margin: 1em;
			padding: 1em;
			box-sizing: border-box;
		}
		.part-header,
		.add-part {
			border: 1px solid #ccc;
		}
		.part-header {
			border-left-width: .5em;
			padding: .25em 1em;
		}
		.part-placeholder {
			border: 2px solid #005249;
		}
		.part-title {
			display: inline-block;
			padding: .5em;
			margin: 0 4.5em 0 0;
			font-size: 13px;
			font-weight: 700;
		}
		.part-overview {
			max-width: 40em;
			margin: 0 1.5em 0 0;
			padding: .25em .5em .75em;
		}
		.part-handle {
			border: .8em dotted #00796B;
			background: #005249;
			position: absolute;
			top: -1px; bottom: -1px;
			left: -1.4em;
			border-radius: .6em 0 0 .6em;
		}
		.part-header::before,
		.part-delete,
		.part-close {
			font-weight: 700;
			position: absolute;
			top: 0; bottom: 0;
			margin: 0;
			display: flex;
			align-items: center;
			justify-content: center;
		}
		.part-header::before {
			content: "PART "counter(part, decimal-leading-zero);
			right: 2em;
		}
		.part-delete {
			right: -1.75em;
		}
		.part-close {
			right: .25em;
			color: #ccc;
			cursor: pointer;
			font-size: 2em;
		}

		/* CASES */

		.cases {
			display: flex;
			flex-flow: row wrap; 
			overflow: hidden;
		}
		.case {
			display: flex;
			flex-flow: column;
			counter-increment: case-total case;
		}
		.case,
		.case-placeholder {
			position: relative;
			padding: 1em;
			width: 23%;
			min-width: 300px;
			border: 1px dashed transparent;
		}
		.cases .case-placeholder {
			background: #f5f5f5;
			border-color: #00796B;
		}	min-width: 23% !important;
		}
		/* numbers and cuts indicators */
		.case.cut {
			counter-reset: case;
		}
		.case:first-child,
		.case.cut {
			counter-increment: shot shot-total;
		}
		.case::before,
		.case::after {
			color: #555;
		}
		.case::before,
		.case:first-child~.case.cut::before,
		.case.cut~.case.cut::before {
			position: absolute;
			bottom: 1em; right: 1em;
			content: counter(shot-total, decimal-leading-zero);
		}
		.case:first-child~.case::before,
		.case.cut~.case::before {
			content: none;
		}
		.case::after,
		.case:first-child~.case.cut::after,
		.case.cut~.case.cut::after {
			content: " PART "counter(part, decimal-leading-zero)
					 " SHOT "counter(shot, decimal-leading-zero);
		}
		.case:first-child~.case::after,
		.case.cut~.case::after {
			content: "("counter(case)")";
		}
		/* cuts indicators */
		.case .case-img::before {
			content: " ";
			position: absolute;
			left: -2.5em;
			width: 3em;
			top: 50%; bottom: 50%;
			border: 1px solid #ff5722;
			border-width: 1px 0 0;
			z-index: -1;
			transition: width .2s ease-in-out, left .2s ease-in-out;
		}
		.case.cut .case-img::before {
			content: " ";
			position: absolute;
			left: -1.25em; width: 0;
			top: 25%; bottom: 25%;
			border: 1px dashed #ff5722;
			border-width: 0 1px 0 0;
			z-index: -1;
		}
		.case:first-child .case-img::before {
			content: none;
		}
		/* case content */
		.case-img {
			position: relative;
			line-height: 0;
		}
		.case-img img {
			width: 100%;
			transition: all .1s ease;
		}
		.case-img img.dragenter {
			outline: 2px solid #00796B;
			transform: scale(1.05);
		}
		.case-img img.dropped {
			animation: drop .4s ease-in-out;
		}
		.case-img img.notimage {
			animation: error .2s;
		}
		.case-text {
			position: relative;
			padding: .5em 0;
		}
		.case-text p,
		.case-text div {
			padding: .5em 0;
		}
		/* sizing */
		.case,
		.case-placeholder,
		.part-header,
		.add-part {
			width: 23%;
			min-width: 300px;
			transition: all .2s ease-in-out;
		}
		.bigimg .case,
		.bigimg .case-placeholder,
		.bigimg .part-header,
		.bigimg .add-part {
			width: 15%;
			min-width: 200px;
		}
		.case.ispano {
			width: 100% !important;
			min-width: 23% !important;
		}
		.bigimg .case.ispano {
			width: 100% !important;
			min-width: 15% !important;
		}

		/* switches */
		.nomanagement .management {
			display: none;
		}
		.management {
			opacity: 1;
			visibility: visible;
			transition: opacity .2s ease-in-out, visibility 0 .2s linear;
		}
		.hidemanagement .management {
			opacity: 0;
			visibility: hidden;
		}
		.overlay {
			animation: reveal .2s;
		}
		.case {
			animation: reveal .2s;
			transition: all .2s ease;
		}
		.case.remove {
			min-width: 0;
			width: 0;
			opacity: 0;
		}
		.part-header::before,
		.case::before,
		.case::after,
		.part-overview,
		.case-text {
			max-height: 15em;
			opacity: 1;
			transition: all .2s ease-in-out;
		}
		.hidetexts .part-overview,
		.hidetexts .case-text,
		.hidenumbers .part-header::before,
		.hidenumbers .case::before,
		.hidenumbers .case::after {
			opacity: 0;
			max-height: 0;
			padding-top: 0;
			padding-bottom: 0;
			margin-top: 0;
			margin-bottom: 0;
		}

		/* BUTTONS */

		.btn,
		.btn:visited {
			text-transform: uppercase;
			cursor: pointer;
			text-decoration: none;
			color: #00796B;
			font-weight: 700;
			font-size: 1.2em;
			-webkit-user-select: none;  
			-moz-user-select: none;    
			-ms-user-select: none; 
			user-select: none;
		}
		.btn:hover {
			color: #FF5722;
		}
		.overlay {
			position: absolute;
			right: 0; left: 0;
			top: 0; bottom: 0;
			background: rgba(255,255,255,.6);
			display: flex;
			flex-flow: row-reverse wrap;
			align-items: center;
			z-index: 999;
			font-size: 2em;
		}
		.overlay .btn {
			font-weight: 300;
			text-align: center;
			flex: 1;
		}
		.add {
			display: flex;
			align-items: center;
			justify-content: center;
		}
		.add-case::after {
			font-size: 1.5em;
			border: 1px solid #ccc;
			border-radius: 3px;
			padding: .5em 1em;
		}

		/* icons and texts */

		.toggle::before {
			content: "☑";
		}
		.toggle.off::before {
			content: "☐";
		}
		.add-part::after {
			content: "Add a new part";
		}
		.add-case::after {
			content: "+";
		}
		.part-close::after {
			content: "▴";
		}
		.part.closed .part-close::after {
			content: "▾";
		}
		.toggle-parts::after {
			content: "▾ Open all parts";
		}
		.toggle-parts.close::after {
			content: "▴ Close all parts";
		}
		.part-delete::after,
		.overlay .delete::after {
			content: "✕";
		}
		.overlay .btn-pano::after {
			content: "⇔";
		}
		.case.ispano .btn-pano::after {
			content: "⇐⇒";
		}
		.overlay .btn-cut::after {
			content: "||";
		}
		.case.cut .btn-cut::after {
			content: "--";
		}
	</style>
</head>
<body>
	<header class="header">
		<div class="header-title" contenteditable="true"><h1>Storyboard</h1></div>
		<ul>
			<li><div class="btn toggle management" data-toggle="hidemanagement">Manage</div></li>
			<li><div class="btn toggle" data-toggle="hidetexts">Texts</div></li>
			<li><div class="btn toggle" data-toggle="hidenumbers">Numbers</div></li>
			<li><div class="btn toggle" data-toggle="bigimg">Big images</div></li>
			<li><a class="btn" href="https://github.com/nliautaud/storynator" target="_blank">Github</a></li>
		</ul>
	</header>
	<div class="story">
		<div class="btn toggle-parts close"></div>
		<ul class="parts sortable" data-sortable-id="0" aria-dropeffect="move">
			<div class="btn add add-part management"></div>
		</ul>
	</div>
	<script id="template" type="text/x-custom-template">
	<li class="part">
		<header class="part-header">
			<h1 class="part-title" contenteditable="true">Title</h1>
			<p class="part-overview" contenteditable="true">Overview</p>
			<div class="part-handle management"></div>
			<div class="part-close"></div>
			<div class="btn part-delete management"></div>
		</header>
		<ul class="cases sortable connected">
			<li class="case cut">
				<div class="case-img"><img src="data:image/gif;base64,R0lGODlhEAAJAKIAAMzMzJaWlrGxsaOjo76+vpycnMXFxaqqqiwAAAAAEAAJAAADCwi63P4wykmrvRgmADs="></div>
				<div class="case-text" contenteditable="true">caption</div>
			</li>
			<div class="btn add add-case management"></div>
		</ul>
	</li>
	</script>
	<script id="overlay-tpl" type="text/x-custom-template">
		<div class="overlay">
			<div class="btn delete"></div>
			<div class="btn btn-pano" data-toggle="ispano"></div>
			<div class="btn btn-cut" data-toggle="cut"></div>
		</div>
	</script>
	<script src="./story_files/jquery-2.1.4.min.js"></script>
	<script src="./story_files/html.sortable.min.js"></script>
	<script src="./story_files/main.js"></script>
	<script charset="utf-8" async defer>

		// Interface helpers and toggles
		// management is enabled by story_files/main.js

		var story = document.querySelector('.story'),
			header = document.querySelector('.header');

		function getTarget (e) {
			e = e || window.event;
		    var targ = e.target || e.srcElement;
		    if (targ.nodeType == 3) targ = targ.parentNode; // defeat Safari bug
		    return targ;
		}

		document.body.className += ' nomanagement';

		// fixed header space
		var setHeaderSpace = function() {
			document.body.style.paddingTop = header.offsetHeight + 'px';
		};
		window.onresize = setHeaderSpace;
		window.onload = setHeaderSpace;

		// header options toggle
		document.querySelector('.header ul').onclick = function (e){
			var tgt = getTarget(e);
			tgt.classList.toggle('off');
			story.classList.toggle(tgt.dataset.toggle);
		};

		// parts toggles
		document.querySelector('body').addEventListener('click', function(e) {
			var tgt = getTarget(e);
			if(tgt.classList.contains('part-close')) {
				tgt.parentNode.parentNode.classList.toggle('closed');
			}
		});
		document.querySelector('.toggle-parts').onclick = function (e){
			var target = '.closed';
			if(this.classList.contains('close'))
				target = ':not(' + target + ')';
			var parts = document.querySelector('.part'+target);
			if(parts === null) return;
			for (var i = 0; i < parts.length; i++) {
				part.classList.toggle('closed');
			}
			this.classList.toggle('close');
		};
 
	</script>
</body>
</html>